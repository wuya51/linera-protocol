<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Conditionally dispatch requests to the inner service based on the result of a predicate."><title>tower::filter - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="tower" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.0 (051478957 2024-07-21)" data-channel="1.80.0" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../tower/index.html">tower</a><span class="version">0.4.13</span></h2></div><h2 class="location"><a href="#">Module filter</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></section><h2><a href="../index.html">In crate tower</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">tower</a>::<wbr><a class="mod" href="#">filter</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/tower/filter/mod.rs.html#1-191">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Conditionally dispatch requests to the inner service based on the result of
a predicate.</p>
<p>A predicate takes some request type and returns a <code>Result&lt;Request, Error&gt;</code>.
If the predicate returns <a href="https://doc.rust-lang.org/1.80.0/core/result/enum.Result.html#variant.Ok" title="variant core::result::Result::Ok"><code>Ok</code></a>, the inner service is called with the request
returned by the predicate — which may be the original request or a
modified one. If the predicate returns <a href="https://doc.rust-lang.org/1.80.0/core/result/enum.Result.html#variant.Err" title="variant core::result::Result::Err"><code>Err</code></a>, the request is rejected and
the inner service is not called.</p>
<p>Predicates may either be synchronous (simple functions from a <code>Request</code> to
a <a href="https://doc.rust-lang.org/1.80.0/core/result/enum.Result.html" title="enum core::result::Result"><code>Result</code></a>) or asynchronous (functions returning <a href="https://doc.rust-lang.org/1.80.0/core/future/future/trait.Future.html" title="trait core::future::future::Future"><code>Future</code></a>s). Separate
traits, <a href="trait.Predicate.html" title="trait tower::filter::Predicate"><code>Predicate</code></a> and <a href="trait.AsyncPredicate.html" title="trait tower::filter::AsyncPredicate"><code>AsyncPredicate</code></a>, represent these two types of
predicate. Note that when it is not necessary to await some other
asynchronous operation in the predicate, the synchronous predicate should be
preferred, as it introduces less overhead.</p>
<p>The predicate traits are implemented for closures and function pointers.
However, users may also implement them for other types, such as when the
predicate requires some state carried between requests. For example,
<a href="trait.Predicate.html" title="trait tower::filter::Predicate"><code>Predicate</code></a> could be implemented for a type that rejects a fixed set of
requests by checking if they are contained by a a <a href="https://doc.rust-lang.org/1.80.0/std/collections/hash/set/struct.HashSet.html" title="struct std::collections::hash::set::HashSet"><code>HashSet</code></a> or other
collection.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="future/index.html" title="mod tower::filter::future">future</a></div><div class="desc docblock-short">Future types</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AsyncFilter.html" title="struct tower::filter::AsyncFilter">AsyncFilter</a></div><div class="desc docblock-short">Conditionally dispatch requests to the inner service based on an
<a href="trait.AsyncPredicate.html" title="trait tower::filter::AsyncPredicate">asynchronous predicate</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.AsyncFilterLayer.html" title="struct tower::filter::AsyncFilterLayer">AsyncFilterLayer</a></div><div class="desc docblock-short">Conditionally dispatch requests to the inner service based on an asynchronous
<a href="trait.AsyncPredicate.html" title="trait tower::filter::AsyncPredicate">predicate</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Filter.html" title="struct tower::filter::Filter">Filter</a></div><div class="desc docblock-short">Conditionally dispatch requests to the inner service based on a <a href="trait.Predicate.html" title="trait tower::filter::Predicate">predicate</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.FilterLayer.html" title="struct tower::filter::FilterLayer">FilterLayer</a></div><div class="desc docblock-short">Conditionally dispatch requests to the inner service based on a synchronous
<a href="trait.Predicate.html" title="trait tower::filter::Predicate">predicate</a>.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.AsyncPredicate.html" title="trait tower::filter::AsyncPredicate">AsyncPredicate</a></div><div class="desc docblock-short">Checks a request asynchronously.</div></li><li><div class="item-name"><a class="trait" href="trait.Predicate.html" title="trait tower::filter::Predicate">Predicate</a></div><div class="desc docblock-short">Checks a request synchronously.</div></li></ul></section></div></main></body></html>